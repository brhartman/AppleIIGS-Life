; ------------------------------------------------------------------------------
; utilities.s
; ------------------------------------------------------------------------------
             mx    %00


; Set16Bit
; ------------------------------------------------------------------------------
Set16Bit     clc
             xce
             rep   #$30
             rts


; CheckKey
; Return: A = #$0001 on key press
; ------------------------------------------------------------------------------
CheckKey     sep   #$30
             ldal  $00c000
             bmi   :KeyPress
:NoKeyPress  stal  $00c010
             rep   #$30
             lda   #$0000
             rts
:KeyPress    stal  $00c010
             rep   #$30
             lda   #$0001
             rts


; WaitKey
; ------------------------------------------------------------------------------
WaitKey      sep   #$30
:Wait        ldal  $00c000
             bpl   :Wait
             stal  $00c010
             rep   #$30
             rts


; Quit
; ------------------------------------------------------------------------------
Quit         jsl   $e100a8
             da    $29
             adrl  QuitParam
QuitParam    adrl  $0000
             da    $00
